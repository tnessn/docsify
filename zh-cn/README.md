> PlatON不是一个狭义的区块链平台，PlatON更应该认为是大规模计算网络，一个基于密码学算法构建的Trustless计算基础设施。

![architecture](https://raw.githubusercontent.com/wiki/PlatONnetwork/wiki/architecture-cn.png)

### 区块链的挑战
["不可能三角"](https://github.com/ethereum/wiki/wiki/Sharding-FAQs) 提出了区块链的三个核心问题：可扩展性、去中心化和安全性。另外随着Google、Facebook、万豪酒店等公司数据“泄露门”的发生，以及欧盟《一般数据保护条例》（GDPR）的实施，隐私问题也日益成为区块链的第四个重要问题。从目前现状看，当人们谈论到区块链的大规模应用时，核心还是关注两个问题：可扩展性和隐私性。

**可扩展性**已经公认为区块链的最大难题。当前主流的区块链每秒处理3-20个交易，与运行主流金融市场所需的处理能力相差几个数量级。虽然业界也在积极实施各种解决方案，但受限于”不可能三角“，都是以牺牲去中心化或安全性为前提的。区块链基于共识的计算方式也限制了智能合约不能支持复杂的计算逻辑。

**隐私**是区块链的另一个主要问题。尽管区块链的不可篡改、去中心化、无需信任等优势是诱人的，但其跟大数据和AI技术同样面临获取不到数据的困境，无论是公司还是个人，都没有意愿将隐私信息发布到公共账本中，这些账本可以不受限制地被政府、家人、同事和商业竞争对手随意读取。

### PlatON的核心方案
**可验证计算**。鉴于链上共识既有的局限性，链上的功能应该是”验证”而不是“计算”。越来越多的人们积极地致力于实施链下方案，通过链下计算提高区块链的扩展性。虽然链上已经公认为是一个无需信任的环境，但是链下方案的实施又引入新的不信任因素。PlatON的可验证计算（VC）密码学算法将信任传递到链下。通过可验证计算，合约只需要在链下计算一次，所有节点可以快速验证计算的正确性，一方面提高了交易的处理性能，另一方面也使得PlatON支持复杂合约的Trustless计算。

**隐私计算**。PlatON通过叠加同态加密（HE）和安全多方计算（MPC），实现真正的隐私计算，保证输入数据以及计算逻辑本身的隐私。与依赖第三方制造商提供的可信硬件或TEE（例如SGX）进行计算完整性的可信计算相比，PlatON 上的Trustless 计算仅依赖于可证伪的密码学假设，从而在其生命周期内提供前所未有的私有数据安全性，不存在信任边界。

## PlatON的基本概念

### 节点
![nodes](https://raw.githubusercontent.com/wiki/PlatONnetwork/wiki/nodes-cn.png)

PlatON 将交易执行跟区块链共识解耦，在链下构建可扩展Trustless 计算网络。因此，PlatON中的节点主要有以下几类：

**轻节点**不保存所有区块的数据，只保存区块头信息以及跟自己相关的数据，依赖全节点进行快速交易验证。轻节点参与交易和区块信息的全网广播。

**全节点**保存了所有区块的数据，可以在本地直接验证交易数据的有效性。全节点参与交易和区块信息的全网广播。

**共识节点**负责执行交易并把交易数据打包成区块。在Giskard 共识协议中，共识节点基于VRF和概率分布随机产生，并通过并行BFT 协议达成共识。

**计算节点**是PlatON独创性地引入到区块链生态中的一类节点。计算节点是Trustless计算网络的根基，主要提供算力，在链下执行复杂合约，并使用VC算法生成计算证明，供链上节点进行快速验证。

**数据节点**是Trustless计算网络的另外一个重要组成。基于同态加密（HE）和安全多方计算（MPC），数据节点可在保证隐私的情况下将本地数据输入到计算网络。

### 账户
相比账户模型，UTXO不支持智能合约，而很多的DAG项目也在积极探索智能合约，但是还没有成熟稳定的解决方案，因此PlatON选择成熟稳定支持智能合约的账户模型。PlatON中，每个账户都有一个与之关联的状态(state)和一个20字节的地址(address)。账户分为两类：

**普通账户**由私钥控制，用户可通过钱包客户端或命令行生成。在PlatON中，普通账户可以创建交易，并使用私钥对交易签名。普通账户除保存账户余额外，智能合约可被授权扩展和访问自定义属性。

**合约账户**没有私钥，由代码控制，合约账户地址在部署合约时产生。与普通账户不同，合约账户不能自行发起新的交易。每当合约账户收到一条消息，合约内部的代码就会被激活，允许它对内部存储进行读取和写入，以及发送其它消息或者创建合约。

### 智能合约
从技术角度看，PlatON计算网络本质上是一个去中心化的FaaS平台，相应地，智能合约可以认为就是FaaS上的function。PlatON中的智能合约分为三类。

![contracts](https://raw.githubusercontent.com/wiki/PlatONnetwork/wiki/contracts-cn.png)

**Wasm合约**支持高级语言开发，编译成wasm执行。触发Wasm合约的交易由共识节点打包，全网节点重复执行验证。Wasm合约的状态保存在公共账本中。

**可验证合约**的开发和发布跟Wasm合约没有区别，最终也是编译成wasm执行。可验证合约的状态转换在链下由计算节点异步执行，计算完成后新的状态和状态转换证明提交到链上，全网节点可快速验证正确性并将新的状态更新到公共账本中。可验证合约可支持复杂、繁重的计算逻辑而不影响整条链的性能。

**隐私合约**同样支持高级语言开发，编译成llvm ir中间语言执行。隐私合约的输入数据保存在数据节点本地，由数据节点在链下以安全多方计算方式进行隐私计算，并提交计算结果到链上。

## PlatON中的共识
“不可能三角”中，去中心化的量化指标就是参与共识的节点数量，可扩展性的量化指标是TPS或吞吐量，安全性的量化指标是作恶的经济成本，经过对这几个量化指标的权衡，PlatON的Giskard共识最终综合采用了PoS和BFT机制。

**PPoS(基于概率分布的PoS)**，实际上，所有PoS系统都会存在共识节点数量和性能之间的权衡问题。DPoS偏向较少的共识节点，换取较高的性能。Algorand采用随机方式在全网选取共识节点，但是只能在强同步网络上运行。这是两个典型的极端方法。PlatON采取折衷的方法，任何Energon持有者可以通过Staking参选共识节点，其他Energon持有者通过Staking的方式持续投票，维持一个小规模的动态共识节点候选人列表，然后在这个候选人列表中采用VRF和概率分布方式随机选取。这种方法缩小了共识节点的选取范围，又有效避免了过于中心化的问题。

**CBFT(并行BFT共识)**，目前常用的各种xBFT均为同步处理，即对一个区块确认后才生产下一个区块，这种方法存在一个性能上的上限。PlatON采用并行BFT共识，即出块和区块验证并行进行，在保证BFT1/3容错性的同时，大大的提高了出块的速率。

## PlatON中的计算生态
算力和数据是计算必备的要素，PlatON天然形成了算力和数据交易市场，组成一个完整的计算生态。

### 算力市场
PlatON的可验证合约体系天然就是一个自动清结算的安全计算市场，复杂的计算任务可通过可验证合约对外发布，链下拥有算力的众多计算节点进行计算并发布计算证明，计算正确性得到快速验证后，计算费用即时清结算。

### 数据市场
我们正处于大数据驱动的AI时代，人们越来越认识到数据的价值，但是数据分散在不同的机构中，各家机构的数据维度都有限，难于充分挖掘数据的价值。而要联合，必然需要将数据给付到对方，或双方将数据给付至一个共同的中间平台，如何保证数据不被泄露，特别是有关自有客户隐私类的数据不被恶意应用，是首当其冲的问题。
PlatON的隐私合约可用于数据的安全交易。隐私合约可保证数据节点的数据隐私，同时也是一个自动化的清结算机构，可保证交易双方的数据与Energon的自动交割。
